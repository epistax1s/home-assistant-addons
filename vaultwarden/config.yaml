# config.yaml: Определяет метаданные аддона, опции UI и маппинги.
# Required: name, version, slug, description, arch.
# init: false - обязательно для S6-overlay (отключает Docker init).
# host_network: true - для доступа по IP HA.
# map: Для монтирования папок (/config/vaultwarden в контейнере).
# ports: Для ROCKET_PORT (null = не expose снаружи).
# options/schema: Дефолты и валидация UI (все твои vars, с ? для optional).

name: Vaultwarden
version: "1.0.5"  # Бампь при обновлениях (тэг для Docker image).
slug: vaultwarden  # Уникальный ID (используется в Supervisor).
description: "Self-hosted Vaultwarden (Bitwarden compatible server) as HA add-on"
url: "https://github.com/epistax1s/home-assistant-addons"  # Твой репозиторий.

arch:
  - aarch64
  - amd64
  - armv7
  - armhf

startup: services  # Запуск как сервис (после системы, перед приложениями).
boot: auto  # Автостарт при загрузке HA.
init: false  # Отключает Docker init (требуется для S6-overlay).
host_network: true  # Аддон использует сеть хоста (доступ по IP:80).

map:
  - addon_data:rw  # Монтирует в /data внутри контейнера
  - ssl:rw  # Для SSL certs, если включишь HTTPS.

ports:
  80/tcp: null  # Порт для ROCKET_PORT (null = не expose, но доступен локально).

options:  # Дефолты для UI (пользователь может изменить).
  domain: "http://192.168.0.133:80"  # С протоколом и портом (избежать ошибок парсинга).
  rocket_port: 80
  admin_token: ""
  websocket_enabled: true
  signups_allowed: false
  invitations_allowed: true
  emergency_access_allowed: true
  sends_allowed: true

schema:  # Валидация UI (типы, ? = optional).
  domain: str  # Обязательный (UI не даст сохранить без него).
  rocket_port: port
  admin_token: password?
  websocket_enabled: bool
  signups_allowed: bool
  invitations_allowed: bool
  emergency_access_allowed: bool
  sends_allowed: bool
